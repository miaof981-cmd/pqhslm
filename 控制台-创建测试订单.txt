// ========================================
// 复制以下代码到控制台执行
// ========================================

(function() {
  const userInfo = wx.getStorageSync('userInfo') || { nickName: '测试用户', avatarUrl: '/assets/default-avatar.png' };
  const userId = wx.getStorageSync('userId') || 1001;
  let orders = wx.getStorageSync('pending_orders') || [];
  
  const now = new Date();
  const fmt = (d) => {
    const pad = (n) => String(n).padStart(2, '0');
    return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
  };
  
  // 订单1：已脱稿（超期2天）
  const createTime1 = new Date(now.getTime() - 9*24*60*60*1000);
  const deadline1 = new Date(now.getTime() - 2*24*60*60*1000);
  
  orders.push({
    id: '2025' + Date.now().toString().slice(-9),
    productName: '【已脱稿】赛博朋克头像',
    productImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==',
    price: 88,
    spec: '全身/竖屏',
    deliveryDays: 7,
    createTime: fmt(createTime1),
    deadline: fmt(deadline1),
    status: 'overdue',
    statusText: '已拖稿',
    buyerId: userId,
    buyerName: userInfo.nickName,
    buyerAvatar: userInfo.avatarUrl,
    artistId: userId,
    artistName: userInfo.nickName,
    artistAvatar: userInfo.avatarUrl,
    serviceName: '待分配',
    serviceAvatar: '/assets/default-avatar.png'
  });
  
  // 订单2：临近截稿（12小时后）
  const createTime2 = new Date(now.getTime() - 6.5*24*60*60*1000);
  const deadline2 = new Date(now.getTime() + 0.5*24*60*60*1000);
  
  orders.push({
    id: '2025' + (Date.now()+1).toString().slice(-9),
    productName: '【临近截稿】动漫插画',
    productImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8z8DwHwAFBQIAX8jx0gAAAABJRU5ErkJggg==',
    price: 168,
    spec: '半身/横屏',
    deliveryDays: 7,
    createTime: fmt(createTime2),
    deadline: fmt(deadline2),
    status: 'nearDeadline',
    statusText: '临近截稿',
    buyerId: userId,
    buyerName: userInfo.nickName,
    buyerAvatar: userInfo.avatarUrl,
    artistId: userId,
    artistName: userInfo.nickName,
    artistAvatar: userInfo.avatarUrl,
    serviceName: '待分配',
    serviceAvatar: '/assets/default-avatar.png'
  });
  
  wx.setStorageSync('pending_orders', orders);
  console.log('✅ 创建成功！2个测试订单已添加');
  console.log('订单1: 已脱稿2天 🔴');
  console.log('订单2: 临近截稿(12小时) 🟡');
  wx.reLaunch({ url: '/pages/workspace/index' });
})();

