# æ¸…ç†æ—§æ•°æ®è„šæœ¬

## ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦æ¸…ç†

æ—§æ•°æ®ä¸­çš„å›¾ç‰‡è·¯å¾„æ˜¯**ä¸´æ—¶è·¯å¾„**ï¼ˆ`http://tmp/wxfile_xxxxx.jpg`ï¼‰ï¼Œå·²ç»å¤±æ•ˆã€‚
æ–°ä»£ç ä½¿ç”¨**base64æ°¸ä¹…è·¯å¾„**ï¼ˆ`data:image/jpeg;base64,xxx`ï¼‰ï¼Œä¸ä¼šå¤±æ•ˆã€‚

å¿…é¡»æ¸…ç†æ—§æ•°æ®ï¼Œé‡æ–°åˆ›å»ºå•†å“ï¼Œæ‰èƒ½ä½¿ç”¨æ–°çš„æ°¸ä¹…è·¯å¾„ã€‚

---

## ğŸ§¹ æ¸…ç†è„šæœ¬

### æ–¹æ³•1: æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆæ¨èï¼‰

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„**æ§åˆ¶å°**ä¸­æ‰§è¡Œï¼š

```javascript
// æ¸…ç†æ‰€æœ‰æ—§æ•°æ®
wx.removeStorageSync('mock_products')
wx.removeStorageSync('cart_items')
wx.removeStorageSync('pending_orders')
wx.removeStorageSync('completed_orders')

console.log('âœ… å·²æ¸…ç†æ‰€æœ‰æ—§æ•°æ®ï¼ˆåŒ…å«ä¸´æ—¶è·¯å¾„ï¼‰')
console.log('è¯·é‡æ–°åˆ›å»ºå•†å“ï¼Œå›¾ç‰‡å°†è‡ªåŠ¨è½¬æ¢ä¸ºæ°¸ä¹…è·¯å¾„')
```

### æ–¹æ³•2: åªæ¸…ç†å•†å“æ•°æ®

å¦‚æœä¸æƒ³æ¸…ç†è®¢å•ï¼Œåªæ¸…ç†å•†å“ï¼š

```javascript
// åªæ¸…ç†å•†å“æ•°æ®
wx.removeStorageSync('mock_products')
wx.removeStorageSync('cart_items')

console.log('âœ… å·²æ¸…ç†å•†å“å’Œè´­ç‰©è½¦æ•°æ®')
console.log('è®¢å•æ•°æ®å·²ä¿ç•™')
```

### æ–¹æ³•3: æŸ¥çœ‹æ•°æ®åå†å†³å®š

å…ˆæŸ¥çœ‹ç°æœ‰æ•°æ®ï¼š

```javascript
// æŸ¥çœ‹æ‰€æœ‰æ•°æ®
console.log('=== æœ¬åœ°å­˜å‚¨æ•°æ®æ£€æŸ¥ ===')

const products = wx.getStorageSync('mock_products') || []
console.log('\nã€å•†å“æ•°æ®ã€‘')
console.log('æ•°é‡:', products.length)
products.forEach(p => {
  console.log(`- ${p.name}`)
  console.log('  å›¾ç‰‡:', p.images?.[0]?.substring(0, 50) + '...')
  console.log('  æ˜¯å¦ä¸´æ—¶è·¯å¾„:', p.images?.[0]?.includes('tmp'))
})

const cart = wx.getStorageSync('cart_items') || []
console.log('\nã€è´­ç‰©è½¦æ•°æ®ã€‘')
console.log('æ•°é‡:', cart.length)

const orders = wx.getStorageSync('pending_orders') || []
console.log('\nã€è®¢å•æ•°æ®ã€‘')
console.log('æ•°é‡:', orders.length)

// å¦‚æœç¡®è®¤è¦æ¸…ç†ï¼Œæ‰§è¡Œï¼š
// wx.removeStorageSync('mock_products')
// wx.removeStorageSync('cart_items')
// wx.removeStorageSync('pending_orders')
```

---

## âœ… éªŒè¯æ–°å›¾ç‰‡è·¯å¾„

æ¸…ç†æ•°æ®åï¼Œé‡æ–°åˆ›å»ºå•†å“ï¼Œç„¶åéªŒè¯ï¼š

```javascript
// éªŒè¯æ–°å•†å“çš„å›¾ç‰‡è·¯å¾„
const products = wx.getStorageSync('mock_products') || []
if (products.length > 0) {
  const lastProduct = products[0]
  console.log('=== æ–°å•†å“å›¾ç‰‡éªŒè¯ ===')
  console.log('å•†å“åç§°:', lastProduct.name)
  console.log('å›¾ç‰‡è·¯å¾„:', lastProduct.images[0]?.substring(0, 100) + '...')
  console.log('æ˜¯å¦ base64:', lastProduct.images[0]?.startsWith('data:image'))
  console.log('æ˜¯å¦ä¸´æ—¶è·¯å¾„:', lastProduct.images[0]?.includes('tmp'))
  
  if (lastProduct.images[0]?.startsWith('data:image')) {
    console.log('âœ… å›¾ç‰‡å·²è½¬æ¢ä¸ºæ°¸ä¹…è·¯å¾„ï¼ˆbase64ï¼‰')
    console.log('âœ… å°ç¨‹åºé‡å¯åä»ç„¶æœ‰æ•ˆ')
  } else {
    console.log('âŒ å›¾ç‰‡ä»æ˜¯ä¸´æ—¶è·¯å¾„ï¼Œè¯·æ£€æŸ¥ä»£ç ')
  }
} else {
  console.log('âš ï¸ æš‚æ— å•†å“æ•°æ®ï¼Œè¯·å…ˆåˆ›å»ºå•†å“')
}
```

---

## ğŸ§ª å®Œæ•´æµ‹è¯•æµç¨‹

### 1. æ¸…ç†æ—§æ•°æ®
```javascript
wx.removeStorageSync('mock_products')
wx.removeStorageSync('cart_items')
wx.removeStorageSync('pending_orders')
console.log('âœ… å·²æ¸…ç†')
```

### 2. é‡æ–°ç¼–è¯‘å°ç¨‹åº
- ç‚¹å‡»"ç¼–è¯‘"æŒ‰é’®

### 3. åˆ›å»ºæ–°å•†å“
- è¿›å…¥"å·¥ä½œå°" â†’ "å•†å“ç®¡ç†" â†’ "ä¸Šä¼ å•†å“"
- é€‰æ‹©å›¾ç‰‡ï¼ˆä¼šè‡ªåŠ¨è½¬æ¢ä¸º base64ï¼‰
- å¡«å†™å•†å“ä¿¡æ¯
- å‘å¸ƒå•†å“

### 4. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
åº”è¯¥çœ‹åˆ°ï¼š
```
âœ… å›¾ç‰‡è½¬æ¢æˆåŠŸï¼Œå¤§å°: 123.45 KB
âœ… å›¾ç‰‡å·²è½¬æ¢ä¸ºæ°¸ä¹…è·¯å¾„ï¼ˆbase64ï¼‰ï¼Œä¸ä¼šå¤±æ•ˆ
```

### 5. éªŒè¯å›¾ç‰‡è·¯å¾„
```javascript
const products = wx.getStorageSync('mock_products') || []
console.log('å›¾ç‰‡è·¯å¾„:', products[0].images[0].substring(0, 50))
// åº”è¯¥è¾“å‡º: data:image/jpeg;base64,/9j/4AAQSkZJRg...
```

### 6. é‡å¯æµ‹è¯•
- åœæ­¢å°ç¨‹åº
- é‡æ–°ç¼–è¯‘
- æŸ¥çœ‹å•†å“å›¾ç‰‡æ˜¯å¦ä»ç„¶æ˜¾ç¤º âœ…

---

## ğŸ“Š é¢„æœŸç»“æœ

### ä¿®å¤å‰ï¼ˆä¸´æ—¶è·¯å¾„ï¼‰
```
å›¾ç‰‡è·¯å¾„: http://tmp/wxfile_abc123.jpg
æ˜¯å¦ base64: false  âŒ
æ˜¯å¦ä¸´æ—¶è·¯å¾„: true  âŒ
é‡å¯å: å›¾ç‰‡ä¸æ˜¾ç¤º  âŒ
```

### ä¿®å¤åï¼ˆæ°¸ä¹…è·¯å¾„ï¼‰
```
å›¾ç‰‡è·¯å¾„: data:image/jpeg;base64,/9j/4AAQSkZJRg...
æ˜¯å¦ base64: true  âœ…
æ˜¯å¦ä¸´æ—¶è·¯å¾„: false  âœ…
é‡å¯å: å›¾ç‰‡æ­£å¸¸æ˜¾ç¤º  âœ…
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¸…ç†æ•°æ®ä¼šåˆ é™¤æ‰€æœ‰å•†å“å’Œè®¢å•**
   - å¦‚æœæœ‰é‡è¦æ•°æ®ï¼Œè¯·å…ˆå¤‡ä»½
   - æˆ–è€…åªæ¸…ç†å•†å“æ•°æ®ï¼Œä¿ç•™è®¢å•

2. **å›¾ç‰‡å¤§å°å»ºè®®**
   - å•å¼ å›¾ç‰‡å»ºè®® < 500KB
   - æ€»å…±ä¸è¶…è¿‡ 9 å¼ 
   - æœ¬åœ°å­˜å‚¨æ€»é™åˆ¶ 10MB

3. **å¦‚æœå›¾ç‰‡å¤ªå¤§**
   - é€‰æ‹©å›¾ç‰‡æ—¶å·²è‡ªåŠ¨å‹ç¼©ï¼ˆ`compressed`ï¼‰
   - å¦‚æœä»ç„¶å¤ªå¤§ï¼Œå¯ä»¥åœ¨ä¸Šä¼ å‰æ‰‹åŠ¨å‹ç¼©

4. **æ—§è®¢å•çš„å›¾ç‰‡**
   - æ—§è®¢å•ä¸­çš„å›¾ç‰‡è·¯å¾„ä»æ˜¯ä¸´æ—¶è·¯å¾„
   - å¦‚æœéœ€è¦æ˜¾ç¤ºï¼Œéœ€è¦é‡æ–°ä¸‹å•
   - æˆ–è€…æ‰‹åŠ¨æ¸…ç†è®¢å•æ•°æ®

---

## ğŸ‰ å®Œæˆ

æ‰§è¡Œæ¸…ç†è„šæœ¬åï¼Œé‡æ–°åˆ›å»ºå•†å“ï¼Œå›¾ç‰‡å°±æ°¸è¿œä¸ä¼šå¤±æ•ˆäº†ï¼

