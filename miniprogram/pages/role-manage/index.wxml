<view class="role-manage-container">
  <!-- 头部 -->
  <view class="header">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">←</text>
    </view>
    <view class="header-title">权限管理</view>
    <view class="header-right"></view>
  </view>

  <!-- 用户信息 -->
  <view class="user-info-card">
    <view class="info-label">用户ID</view>
    <view class="info-value">{{userId}}</view>
    <view class="info-hint">当前拥有 {{roles.length}} 个身份</view>
  </view>

  <!-- 权限说明 -->
  <view class="tips-card">
    <view class="tips-icon">ℹ️</view>
    <view class="tips-content">
      <text class="tips-title">权限说明</text>
      <text class="tips-text">点击下方卡片可以添加或移除身份。拥有多个身份时，所有功能入口会同时显示在"我的"页面。</text>
    </view>
  </view>

  <!-- 角色列表 -->
  <view class="roles-section">
    <view class="section-title">可用身份</view>
    
    <view wx:for="{{availableRoles}}" wx:key="id" 
          class="role-card {{roles.indexOf(item.id) !== -1 ? 'active' : ''}}"
          data-role="{{item.id}}"
          bindtap="toggleRole">
      <view class="role-icon" style="background: {{item.color}};">
        <text>{{item.icon}}</text>
      </view>
      <view class="role-info">
        <view class="role-name">{{item.name}}</view>
        <view class="role-desc">{{item.desc}}</view>
      </view>
      <view class="role-status">
        <view class="status-indicator {{roles.indexOf(item.id) !== -1 ? 'active' : ''}}"></view>
      </view>
    </view>
  </view>

  <!-- 底部操作 -->
  <view class="bottom-actions">
    <button class="reset-btn" bindtap="resetToCustomer">重置为普通用户</button>
  </view>

  <!-- 提示信息 -->
  <view class="bottom-tips">
    <text>提示：这是开发测试功能，正式环境中权限由管理员在后台分配</text>
  </view>
</view>

