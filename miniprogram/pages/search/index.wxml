<view class="search-page">
  <view class="search-header">
    <view class="search-box">
      <view class="search-icon"></view>
      <input class="search-input"
             placeholder="è¾“å…¥å…³é”®è¯æœç´¢å•†å“æˆ–ç”»å¸ˆ"
             value="{{keyword}}"
             confirm-type="search"
             bindinput="handleInput"
             bindconfirm="handleConfirm"
             focus="{{true}}" />
      <view wx:if="{{keyword}}" class="clear-icon" bindtap="handleClearKeyword"></view>
    </view>
    <text class="cancel-btn" bindtap="goBack">å–æ¶ˆ</text>
  </view>

  <view wx:if="{{history.length > 0}}" class="history-section">
    <view class="section-header">
      <text class="section-title">æœç´¢å†å²</text>
      <text class="section-action" bindtap="clearHistory">æ¸…ç©º</text>
    </view>
    <view class="history-tags">
      <view wx:for="{{history}}" wx:key="*this"
            class="history-tag"
            data-value="{{item}}"
            bindtap="selectHistory">
        {{item}}
      </view>
    </view>
  </view>

  <view class="result-section">
    <view wx:if="{{loading}}" class="loading">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <view wx:elif="{{empty}}" class="empty">
      <view class="empty-icon">ğŸ§</view>
      <text class="empty-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³å•†å“</text>
      <text class="empty-hint">æ¢ä¸ªå…³é”®è¯è¯•è¯•å§</text>
    </view>

    <scroll-view wx:else scroll-y class="result-list">
      <view wx:for="{{results}}" wx:key="id"
            class="result-item"
            data-id="{{item.id}}"
            bindtap="openProduct">
        <image class="result-cover" src="{{item.coverImage}}" mode="aspectFill"></image>
        <view class="result-info">
          <view class="result-name">{{item.name}}</view>
          <view class="result-meta">
            <text wx:if="{{item.categoryName}}" class="meta-tag">{{item.categoryName}}</text>
            <text wx:if="{{item.deliveryDays}}" class="meta-tag">{{item.deliveryDays}}å¤©å‡ºç¨¿</text>
            <block wx:if="{{item.tags && item.tags.length}}">
              <text wx:for="{{item.tags}}" wx:key="*this" class="meta-tag">{{item}}</text>
            </block>
          </view>
          <view class="result-price">Â¥{{item.price}}</view>
        </view>
      </view>
    </scroll-view>
  </view>
</view>
