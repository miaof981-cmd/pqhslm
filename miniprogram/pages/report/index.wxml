<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>
  
  <view wx:else>
    <!-- æ—¶é—´ç­›é€‰å™¨ -->
    <view class="time-filter">
      <view class="filter-item {{timeRange === '7days' ? 'active' : ''}}" 
            data-range="7days" 
            bindtap="switchTimeRange">
        è¿‘7å¤©
      </view>
      <view class="filter-item {{timeRange === '30days' ? 'active' : ''}}" 
            data-range="30days" 
            bindtap="switchTimeRange">
        è¿‘30å¤©
      </view>
      <view class="filter-item {{timeRange === 'custom' ? 'active' : ''}}" 
            data-range="custom" 
            bindtap="switchTimeRange">
        è‡ªå®šä¹‰
      </view>
    </view>

    <!-- è‡ªå®šä¹‰æ—¶é—´é€‰æ‹© -->
    <view wx:if="{{timeRange === 'custom'}}" class="custom-date-picker">
      <picker mode="date" value="{{customStartDate}}" bindchange="onStartDateChange">
        <view class="date-input">
          <text class="date-label">å¼€å§‹æ—¥æœŸï¼š</text>
          <text class="date-value">{{customStartDate || 'è¯·é€‰æ‹©'}}</text>
        </view>
      </picker>
      <text class="date-separator">è‡³</text>
      <picker mode="date" value="{{customEndDate}}" bindchange="onEndDateChange">
        <view class="date-input">
          <text class="date-label">ç»“æŸæ—¥æœŸï¼š</text>
          <text class="date-value">{{customEndDate || 'è¯·é€‰æ‹©'}}</text>
        </view>
      </picker>
    </view>

    <!-- Tabåˆ‡æ¢ -->
    <view class="tab-bar">
      <view class="tab-item {{currentTab === 'artist' ? 'active' : ''}}" 
            data-tab="artist" 
            bindtap="switchTab">
        ç”»å¸ˆ ({{artistList.length}})
      </view>
      <view class="tab-item {{currentTab === 'service' ? 'active' : ''}}" 
            data-tab="service" 
            bindtap="switchTab">
        å®¢æœ ({{serviceList.length}})
      </view>
      <view class="tab-item {{currentTab === 'admin' ? 'active' : ''}}" 
            data-tab="admin" 
            bindtap="switchTab">
        ç®¡ç†å‘˜ ({{adminList.length}})
      </view>
    </view>

    <!-- ç”»å¸ˆè¡¨æ ¼ -->
    <view wx:if="{{currentTab === 'artist'}}" class="table-container">
      <view wx:if="{{artistList.length === 0}}" class="empty-state">
        <text class="empty-icon">ğŸ‘¨â€ğŸ¨</text>
        <text class="empty-text">è¯¥æ—¶é—´æ®µå†…æš‚æ— ç”»å¸ˆæ”¶å…¥æ•°æ®</text>
      </view>
      
      <scroll-view wx:else scroll-x class="table-scroll">
        <view class="data-table">
          <!-- è¡¨å¤´ -->
          <view class="table-header">
            <view class="th th-user">ç”»å¸ˆ</view>
            <view class="th th-count">è®¢å•æ•°</view>
            <view class="th th-money">è¥ä¸šé¢</view>
            <view class="th th-money">å®é™…æ”¶ç›Š</view>
            <view class="th th-money">æ‰“èµæ”¶å…¥</view>
            <view class="th th-money">æ€»æ”¶å…¥</view>
            <view class="th th-money">å·²æç°</view>
            <view class="th th-money">å¯æç°</view>
          </view>
          
          <!-- æ•°æ®è¡Œ -->
          <view wx:for="{{artistList}}" wx:key="userId" class="table-row">
            <view class="td td-user">
              <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill" />
              <text class="user-name">{{item.name}}</text>
            </view>
            <view class="td td-count">{{item.orderCount}}</view>
            <view class="td td-money highlight-revenue">Â¥{{item.totalRevenue}}</view>
            <view class="td td-money">Â¥{{item.actualIncome}}</view>
            <view class="td td-money">Â¥{{item.rewardIncome}}</view>
            <view class="td td-money highlight-total">Â¥{{item.totalIncome}}</view>
            <view class="td td-money">Â¥{{item.withdrawn}}</view>
            <view class="td td-money highlight-available">Â¥{{item.available}}</view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- å®¢æœè¡¨æ ¼ -->
    <view wx:if="{{currentTab === 'service'}}" class="table-container">
      <view wx:if="{{serviceList.length === 0}}" class="empty-state">
        <text class="empty-icon">ğŸ‘”</text>
        <text class="empty-text">è¯¥æ—¶é—´æ®µå†…æš‚æ— å®¢æœæ”¶å…¥æ•°æ®</text>
      </view>
      
      <scroll-view wx:else scroll-x class="table-scroll">
        <view class="data-table">
          <!-- è¡¨å¤´ -->
          <view class="table-header">
            <view class="th th-user">å®¢æœ</view>
            <view class="th th-count">æœåŠ¡è®¢å•</view>
            <view class="th th-money">è¥ä¸šé¢</view>
            <view class="th th-money">å®é™…æ”¶ç›Š</view>
            <view class="th th-money">æ€»æ”¶å…¥</view>
            <view class="th th-money">å·²æç°</view>
            <view class="th th-money">å¯æç°</view>
          </view>
          
          <!-- æ•°æ®è¡Œ -->
          <view wx:for="{{serviceList}}" wx:key="userId" class="table-row">
            <view class="td td-user">
              <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill" />
              <text class="user-name">{{item.name}}</text>
            </view>
            <view class="td td-count">{{item.orderCount}}</view>
            <view class="td td-money highlight-revenue">Â¥{{item.totalRevenue}}</view>
            <view class="td td-money">Â¥{{item.actualIncome}}</view>
            <view class="td td-money highlight-total">Â¥{{item.totalIncome}}</view>
            <view class="td td-money">Â¥{{item.withdrawn}}</view>
            <view class="td td-money highlight-available">Â¥{{item.available}}</view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- ç®¡ç†å‘˜è¡¨æ ¼ -->
    <view wx:if="{{currentTab === 'admin'}}" class="table-container">
      <view wx:if="{{adminList.length === 0}}" class="empty-state">
        <text class="empty-icon">ğŸ’¼</text>
        <text class="empty-text">è¯¥æ—¶é—´æ®µå†…æš‚æ— ç®¡ç†å‘˜æ”¶å…¥æ•°æ®</text>
      </view>
      
      <scroll-view wx:else scroll-x class="table-scroll">
        <view class="data-table">
          <!-- è¡¨å¤´ -->
          <view class="table-header">
            <view class="th th-user">ç®¡ç†å‘˜</view>
            <view class="th th-count">åˆ†æˆè®¢å•</view>
            <view class="th th-money">è¥ä¸šé¢</view>
            <view class="th th-money">å®é™…æ”¶ç›Š</view>
            <view class="th th-money">æ€»æ”¶å…¥</view>
            <view class="th th-money">å·²æç°</view>
            <view class="th th-money">å¯æç°</view>
          </view>
          
          <!-- æ•°æ®è¡Œ -->
          <view wx:for="{{adminList}}" wx:key="userId" class="table-row">
            <view class="td td-user">
              <image class="user-avatar" src="{{item.avatar}}" mode="aspectFill" />
              <text class="user-name">{{item.name}}</text>
            </view>
            <view class="td td-count">{{item.orderCount}}</view>
            <view class="td td-money highlight-revenue">Â¥{{item.totalRevenue}}</view>
            <view class="td td-money">Â¥{{item.actualIncome}}</view>
            <view class="td td-money highlight-total">Â¥{{item.totalIncome}}</view>
            <view class="td td-money">Â¥{{item.withdrawn}}</view>
            <view class="td td-money highlight-available">Â¥{{item.available}}</view>
          </view>
        </view>
      </scroll-view>
    </view>
  </view>

</view>
