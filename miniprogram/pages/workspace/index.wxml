<view class="workspace-container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æ— æƒé™æç¤º -->
  <view wx:elif="{{!hasPermission}}" class="no-permission">
    <view class="no-permission-icon">ğŸ”’</view>
    <view class="no-permission-title">æš‚æ— è®¿é—®æƒé™</view>
    <view class="no-permission-text">æ‚¨è¿˜ä¸æ˜¯ç”»å¸ˆæˆ–å®¢æœ</view>
    <view class="no-permission-hint">è¯·å…ˆç”³è¯·æˆä¸ºç”»å¸ˆæˆ–è”ç³»ç®¡ç†å‘˜å¼€é€šå®¢æœæƒé™</view>
  </view>

  <view wx:else class="workspace-content">
    <!-- é¡¶éƒ¨åˆ‡æ¢èº«ä»½æ ‡ç­¾ï¼ˆåªæ˜¾ç¤ºæœ‰æƒé™çš„ï¼‰ -->
    <view class="role-tabs" wx:if="{{availableRoles.length > 1}}">
      <view wx:if="{{availableRoles.indexOf('artist') !== -1}}" 
            class="role-tab {{userRole === 'artist' ? 'active' : ''}}" 
            data-role="artist" 
            bindtap="switchRoleTab">
        ç”»å¸ˆå·¥ä½œå°
      </view>
      <view wx:if="{{availableRoles.indexOf('service') !== -1}}" 
            class="role-tab {{userRole === 'service' ? 'active' : ''}}" 
            data-role="service" 
            bindtap="switchRoleTab">
        å®¢æœå·¥ä½œå°
      </view>
    </view>
    
    <!-- å•ä¸€è§’è‰²æ—¶æ˜¾ç¤ºæ ‡é¢˜ -->
    <view class="single-role-header" wx:else>
      <text class="role-title" wx:if="{{userRole === 'artist'}}">ç”»å¸ˆå·¥ä½œå°</text>
      <text class="role-title" wx:elif="{{userRole === 'service'}}">å®¢æœå·¥ä½œå°</text>
    </view>

    <!-- å¾…å¤„ç†è®¢å•ï¼ˆå¤§æ•°å­—åŒºåŸŸï¼‰ -->
    <view class="pending-orders-section">
      <view class="section-header">
        <text class="section-title-text">å¾…å¤„ç†è®¢å•</text>
        <switch class="toggle-switch" checked="{{showPendingOrders}}" bindchange="togglePendingOrders"/>
      </view>
      
      <view wx:if="{{showPendingOrders}}" class="pending-stats">
        <view class="stat-item">
          <view class="stat-number">{{pendingStats.nearDeadline}}</view>
          <view class="stat-label">ä¸´è¿‘æˆªç¨¿</view>
        </view>
        <view class="stat-item urgent">
          <view class="stat-number">{{pendingStats.overdue}}</view>
          <view class="stat-label">å·²æ‹–ç¨¿</view>
        </view>
        <view class="stat-item">
          <view class="stat-number">{{pendingStats.inProgress}}</view>
          <view class="stat-label">è¿›è¡Œä¸­</view>
        </view>
      </view>
    </view>

    <!-- å¹³å°é¡»çŸ¥ -->
    <view class="notice-section">
      <view class="notice-header">
        <view class="notice-icon-wrapper">
          <view class="notice-icon"></view>
        </view>
        <text class="notice-title">å¹³å°é¡»çŸ¥</text>
        <text class="view-more" bindtap="viewNotices">æŸ¥çœ‹åŠ¨æ€</text>
      </view>
      <view class="notice-list">
        <view wx:for="{{notices}}" wx:key="id" class="notice-item">
          <text class="notice-text">{{item.content}}</text>
        </view>
      </view>
    </view>

    <!-- å¿«æ·åŠŸèƒ½ -->
    <view class="quick-actions-section">
      <view class="quick-grid">
        <view wx:for="{{quickActions}}" wx:key="id" 
              class="quick-action-item" 
              data-action="{{item.id}}"
              bindtap="handleQuickAction">
          <view class="action-icon-wrapper">
            <view class="action-icon {{item.iconClass}}"></view>
          </view>
          <text class="action-label">{{item.label}}</text>
        </view>
      </view>
    </view>

    <!-- æ¨å¹¿é“¾æ¥ï¼ˆä»…ç”»å¸ˆï¼‰ -->
    <view wx:if="{{userRole === 'artist'}}" class="promo-section">
      <view class="promo-label">æ¨å¹¿é“¾æ¥ï¼š{{promoLink}}</view>
      <button class="copy-btn" bindtap="copyPromoLink">å¤åˆ¶æ¨å¹¿é“¾æ¥</button>
    </view>

    <!-- èŠå¤©çª—å£ï¼ˆå¯é€‰ï¼Œæš‚æ—¶éšè—ï¼‰ -->
    <view wx:if="{{false}}" class="chat-section">
      <view class="chat-header">
        <text>èŠå¤©çª—å£</text>
      </view>
      <view class="chat-content">
        <!-- èŠå¤©å†…å®¹ -->
      </view>
    </view>
  </view>
</view>

