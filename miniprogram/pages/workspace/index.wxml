<view class="workspace-container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:else class="workspace-content">
    <!-- è§’è‰²æ ‡è¯† -->
    <view class="role-badge {{userRole}}">
      <text wx:if="{{userRole === 'artist'}}">ç”»å¸ˆ</text>
      <text wx:elif="{{userRole === 'service'}}">å®¢æœ</text>
    </view>

    <!-- ä»Šæ—¥å¾…åŠ -->
    <view class="todo-section">
      <view class="section-title">
        <text class="title-icon">ğŸ“Š</text>
        <text class="title-text">ä»Šæ—¥å¾…åŠ</text>
      </view>
      
      <view class="todo-grid">
        <view class="todo-item">
          <view class="todo-number">{{todoStats.pendingOrders}}</view>
          <view class="todo-label">å¾…å¤„ç†è®¢å•</view>
        </view>
        <view class="todo-item urgent">
          <view class="todo-number">{{todoStats.urgentOrders}}</view>
          <view class="todo-label">ç´§æ€¥è®¢å•</view>
        </view>
        <view class="todo-item">
          <view class="todo-number">{{todoStats.todayOrders}}</view>
          <view class="todo-label">ä»Šæ—¥è®¢å•</view>
        </view>
      </view>
    </view>

    <!-- è®¢å•åˆ—è¡¨ -->
    <view class="orders-section">
      <view class="section-title">
        <text class="title-icon">ğŸ“‹</text>
        <text class="title-text">è®¢å•åˆ—è¡¨</text>
      </view>
      
      <!-- è®¢å•æ ‡ç­¾ -->
      <view class="order-tabs">
        <view class="tab-item {{currentTab === 'all' ? 'active' : ''}}" 
              data-tab="all" 
              bindtap="switchTab">
          å…¨éƒ¨
        </view>
        <view class="tab-item {{currentTab === 'pending' ? 'active' : ''}}" 
              data-tab="pending" 
              bindtap="switchTab">
          å¾…å¤„ç†
        </view>
        <view class="tab-item {{currentTab === 'processing' ? 'active' : ''}}" 
              data-tab="processing" 
              bindtap="switchTab">
          è¿›è¡Œä¸­
        </view>
        <view class="tab-item {{currentTab === 'completed' ? 'active' : ''}}" 
              data-tab="completed" 
              bindtap="switchTab">
          å·²å®Œæˆ
        </view>
      </view>
      
      <!-- è®¢å•å¡ç‰‡åˆ—è¡¨ -->
      <view wx:if="{{orders.length > 0}}" class="order-list">
        <view wx:for="{{orders}}" wx:key="_id" class="order-card" bindtap="viewOrderDetail" data-id="{{item._id}}">
          <!-- ç´§æ€¥æ ‡ç­¾ -->
          <view wx:if="{{item.isUrgent}}" class="urgent-badge">ç´§æ€¥</view>
          
          <!-- è®¢å•ä¿¡æ¯ -->
          <view class="order-main">
            <view class="order-title">{{item.productName}}</view>
            <view class="order-spec">è§„æ ¼ï¼š{{item.spec}}</view>
            
            <view class="order-details">
              <view class="detail-row">
                <text class="detail-label">è®¢å•å·ï¼š</text>
                <text class="detail-value">{{item.orderNo}}</text>
              </view>
              <view wx:if="{{userRole === 'service'}}" class="detail-row">
                <text class="detail-label">å®¢æˆ·ï¼š</text>
                <text class="detail-value">{{item.customerName}}</text>
              </view>
              <view wx:if="{{userRole === 'service'}}" class="detail-row">
                <text class="detail-label">ç”»å¸ˆï¼š</text>
                <text class="detail-value">{{item.artistName}}</text>
              </view>
              <view class="detail-row">
                <text class="detail-label">ä¸‹å•æ—¶é—´ï¼š</text>
                <text class="detail-value">{{item.createTime}}</text>
              </view>
              <view class="detail-row">
                <text class="detail-label">æˆªæ­¢æ—¥æœŸï¼š</text>
                <text class="detail-value deadline">{{item.deadline}}</text>
              </view>
            </view>
          </view>
          
          <!-- è®¢å•åº•éƒ¨ -->
          <view class="order-footer">
            <view class="order-status {{item.status}}">{{item.statusText}}</view>
            <view class="order-amount">Â¥{{item.amount}}</view>
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view wx:else class="empty-state">
        <text class="empty-icon">ğŸ“­</text>
        <text class="empty-text">æš‚æ— è®¢å•</text>
      </view>
    </view>

    <!-- å¿«æ·åŠŸèƒ½ -->
    <view class="quick-section">
      <view class="section-title">
        <text class="title-icon">ğŸ”§</text>
        <text class="title-text">å¿«æ·åŠŸèƒ½</text>
      </view>
      
      <view class="quick-grid">
        <view wx:for="{{quickActions}}" wx:key="id" 
              class="quick-item" 
              data-action="{{item.id}}"
              data-url="{{item.url}}"
              bindtap="handleQuickAction">
          <view class="quick-icon">{{item.icon}}</view>
          <text class="quick-label">{{item.label}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

