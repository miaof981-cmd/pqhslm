<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:else>
    <!-- ç”»å¸ˆå¤´éƒ¨ä¿¡æ¯ -->
    <view class="artist-header">
      <image class="artist-avatar" src="{{artist.avatar}}" mode="aspectFill" />
      <view class="artist-info">
        <view class="artist-name-row">
          <text class="artist-name">{{artist.name}}</text>
        </view>
        <text class="artist-intro">{{artist.intro}}</text>
        <view class="artist-stats">
          <view class="stat-item">
            <text class="stat-value">{{artist.productCount}}</text>
            <text class="stat-label">ä½œå“</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{artist.orderCount}}</text>
            <text class="stat-label">è®¢å•</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{artist.rating}}</text>
            <text class="stat-label">è¯„åˆ†</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{artist.fans}}</text>
            <text class="stat-label">ç²‰ä¸</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view wx:if="{{!isAdmin}}" class="action-bar">
      <button class="action-btn follow-btn {{artist.isFollowed ? 'followed' : ''}}" bindtap="toggleFollow">
        {{artist.isFollowed ? 'å·²å…³æ³¨' : '+ å…³æ³¨'}}
      </button>
      <button class="action-btn contact-btn" bindtap="contactArtist">è”ç³»ç”»å¸ˆ</button>
    </view>
    <view wx:else class="admin-hint">
      <text class="hint-icon">ğŸ”§</text>
      <text class="hint-text">ç®¡ç†å‘˜æ¨¡å¼ï¼šæŸ¥çœ‹è¯¥ç”»å¸ˆçš„æ‰€æœ‰å•†å“</text>
    </view>

    <!-- Tabåˆ‡æ¢ -->
    <view class="tab-bar">
      <view wx:for="{{tabs}}" wx:key="value"
            class="tab-item {{currentTab === item.value ? 'active' : ''}}"
            data-tab="{{item.value}}"
            bindtap="switchTab">
        <text class="tab-text">{{item.label}}</text>
      </view>
    </view>

    <!-- ä½œå“åˆ—è¡¨ -->
    <view wx:if="{{currentTab === 'products'}}" class="products-section">
      <view wx:if="{{products.length > 0}}" class="product-grid">
        <view wx:for="{{products}}" wx:key="_id" class="product-item" bindtap="viewProduct" data-id="{{item._id}}">
          <image class="product-image" src="{{item.image}}" mode="aspectFill" />
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <view class="product-footer">
              <text class="product-price">Â¥{{item.price}}</text>
              <text class="product-sales">å·²å”®{{item.sales}}</text>
            </view>
          </view>
        </view>
      </view>
      <view wx:else class="empty-state">
        <text class="empty-text">æš‚æ— ä½œå“</text>
      </view>
    </view>

    <!-- ä¸šç»©æ•°æ® -->
    <view wx:elif="{{currentTab === 'performance'}}" class="performance-section">
      <view class="performance-card">
        <view class="card-title">æœ¬æœˆä¸šç»©</view>
        <view class="performance-stats">
          <view class="perf-item">
            <text class="perf-label">è®¢å•æ•°</text>
            <text class="perf-value">{{performance.monthOrders}}</text>
          </view>
          <view class="perf-item">
            <text class="perf-label">æˆäº¤é¢</text>
            <text class="perf-value">Â¥{{performance.monthRevenue}}</text>
          </view>
          <view class="perf-item">
            <text class="perf-label">å®Œæˆç‡</text>
            <text class="perf-value">{{performance.completeRate}}%</text>
          </view>
        </view>
      </view>

      <view class="performance-card">
        <view class="card-title">ç´¯è®¡ä¸šç»©</view>
        <view class="performance-stats">
          <view class="perf-item">
            <text class="perf-label">æ€»è®¢å•</text>
            <text class="perf-value">{{performance.totalOrders}}</text>
          </view>
          <view class="perf-item">
            <text class="perf-label">æ€»æ”¶å…¥</text>
            <text class="perf-value">Â¥{{performance.totalRevenue}}</text>
          </view>
          <view class="perf-item">
            <text class="perf-label">å¥½è¯„ç‡</text>
            <text class="perf-value">{{performance.goodRate}}%</text>
          </view>
        </view>
      </view>

      <view class="performance-card">
        <view class="card-title">æœˆåº¦è¶‹åŠ¿</view>
        <view class="chart-placeholder">
          <text class="chart-text">å›¾è¡¨åŒºåŸŸï¼ˆå¾…é›†æˆï¼‰</text>
        </view>
      </view>
    </view>

    <!-- è¯„ä»·åˆ—è¡¨ -->
    <view wx:elif="{{currentTab === 'reviews'}}" class="reviews-section">
      <view wx:if="{{reviews.length > 0}}" class="review-list">
        <view wx:for="{{reviews}}" wx:key="_id" class="review-item">
          <view class="review-header">
            <image class="reviewer-avatar" src="{{item.userAvatar}}" mode="aspectFill" />
            <view class="reviewer-info">
              <text class="reviewer-name">{{item.userName}}</text>
              <view class="review-rating">
                <view wx:for="{{[1,2,3,4,5]}}" wx:for-item="star" wx:key="*this" class="star {{star <= item.rating ? 'filled' : ''}}"></view>
              </view>
            </view>
            <text class="review-time">{{item.createTime}}</text>
          </view>
          <text class="review-content">{{item.content}}</text>
          <view wx:if="{{item.images.length > 0}}" class="review-images">
            <image wx:for="{{item.images}}" wx:for-item="img" wx:key="*this" 
                   class="review-image" 
                   src="{{img}}" 
                   mode="aspectFill"
                   bindtap="previewImage"
                   data-url="{{img}}"
                   data-urls="{{item.images}}" />
          </view>
        </view>
      </view>
      <view wx:else class="empty-state">
        <text class="empty-text">æš‚æ— è¯„ä»·</text>
      </view>
    </view>
  </view>
</view>
