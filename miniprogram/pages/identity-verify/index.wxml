<view class="verify-container">
  <!-- 头部提示 -->
  <view class="verify-header">
    <view class="header-icon">🔐</view>
    <text class="header-title">实名认证</text>
    <text class="header-desc">为保障资金安全，提现前需完成实名认证</text>
  </view>

  <!-- 已认证状态 -->
  <view wx:if="{{isVerified}}" class="verified-card">
    <view class="verified-badge">
      <text class="badge-icon">✓</text>
      <text class="badge-text">已认证</text>
    </view>
    <view class="verified-info">
      <view class="info-row">
        <text class="info-label">真实姓名</text>
        <text class="info-value">{{realName}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">身份证号</text>
        <text class="info-value">{{idCard}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">银行卡号</text>
        <text class="info-value">{{bankCard}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">开户银行</text>
        <text class="info-value">{{bankName}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">手机号码</text>
        <text class="info-value">{{phoneNumber}}</text>
      </view>
    </view>
    <view class="verified-hint">认证信息已加密保存，请放心使用</view>
  </view>

  <!-- 认证表单 -->
  <view wx:else class="verify-form">
    <!-- 真实姓名 -->
    <view class="form-item">
      <text class="form-label">真实姓名</text>
      <input 
        class="form-input" 
        placeholder="请输入真实姓名（与身份证一致）"
        value="{{realName}}"
        bindinput="onRealNameInput"
        maxlength="20"
      />
    </view>

    <!-- 身份证号 -->
    <view class="form-item">
      <text class="form-label">身份证号</text>
      <input 
        class="form-input" 
        placeholder="请输入18位身份证号"
        value="{{idCard}}"
        bindinput="onIdCardInput"
        maxlength="18"
      />
    </view>

    <!-- 银行卡号 -->
    <view class="form-item">
      <text class="form-label">银行卡号</text>
      <input 
        class="form-input" 
        type="number"
        placeholder="请输入银行卡号"
        value="{{bankCard}}"
        bindinput="onBankCardInput"
        maxlength="19"
      />
    </view>

    <!-- 开户银行 -->
    <view class="form-item">
      <text class="form-label">开户银行</text>
      <picker 
        mode="selector" 
        range="{{bankList}}" 
        value="{{bankIndex}}"
        bindchange="onBankChange"
      >
        <view class="form-picker">
          <text class="{{bankName ? 'picker-value' : 'picker-placeholder'}}">
            {{bankName || '请选择开户银行'}}
          </text>
          <text class="picker-arrow">›</text>
        </view>
      </picker>
    </view>

    <!-- 支行名称 -->
    <view class="form-item">
      <text class="form-label">支行名称</text>
      <input 
        class="form-input" 
        placeholder="例如：北京朝阳支行"
        value="{{bankBranch}}"
        bindinput="onBankBranchInput"
        maxlength="50"
      />
    </view>

    <!-- 预留手机号 -->
    <view class="form-item">
      <text class="form-label">预留手机号</text>
      <input 
        class="form-input" 
        type="number"
        placeholder="请输入银行预留手机号"
        value="{{phoneNumber}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <!-- 短信验证码 -->
    <view class="form-item">
      <text class="form-label">验证码</text>
      <view class="sms-row">
        <input 
          class="form-input sms-input" 
          type="number"
          placeholder="请输入验证码"
          value="{{smsCode}}"
          bindinput="onSmsCodeInput"
          maxlength="6"
        />
        <button 
          class="sms-btn {{smsSending || smsCountdown > 0 ? 'disabled' : ''}}"
          bindtap="sendSmsCode"
          disabled="{{smsSending || smsCountdown > 0}}"
        >
          {{smsCountdown > 0 ? smsCountdown + 's' : smsSending ? '发送中...' : '获取验证码'}}
        </button>
      </view>
    </view>

    <!-- 提示信息 -->
    <view class="form-tips">
      <view class="tip-item">• 请确保信息真实有效，认证后不可修改</view>
      <view class="tip-item">• 银行卡需与身份证姓名一致</view>
      <view class="tip-item">• 仅支持本人储蓄卡，不支持信用卡</view>
      <view class="tip-item">🎯 测试环境验证码：123456</view>
    </view>

    <!-- 提交按钮 -->
    <button 
      class="submit-btn {{loading ? 'loading' : ''}}" 
      bindtap="submitVerify"
      disabled="{{loading}}"
    >
      {{loading ? '提交中...' : '提交认证'}}
    </button>
  </view>
</view>

