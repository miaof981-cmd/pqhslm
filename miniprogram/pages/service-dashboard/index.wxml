<view class="service-dashboard">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:else class="dashboard-content">
    <!-- ä»Šæ—¥å¾…åŠ -->
    <view class="todo-section">
      <view class="section-header">
        <text class="header-icon">ğŸ“Š</text>
        <text class="header-title">ä»Šæ—¥å¾…åŠ</text>
      </view>
      
      <view class="todo-cards">
        <view class="todo-card urgent">
          <view class="todo-number">{{todoStats.pendingOrders}}</view>
          <view class="todo-label">å¾…å¤„ç†è®¢å•</view>
        </view>
        <view class="todo-card warning">
          <view class="todo-number">{{todoStats.pendingMessages}}</view>
          <view class="todo-label">å¾…å›å¤å’¨è¯¢</view>
        </view>
        <view class="todo-card danger">
          <view class="todo-number">{{todoStats.delayedOrders}}</view>
          <view class="todo-label">å»¶æœŸè®¢å•</view>
        </view>
      </view>
    </view>

    <!-- å¿«æ·ç»Ÿè®¡ -->
    <view class="quick-stats">
      <view class="stat-item">
        <text class="stat-label">ä»Šæ—¥è®¢å•</text>
        <text class="stat-value">{{quickStats.todayOrders}}</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-label">ä»Šæ—¥æ”¶å…¥</text>
        <text class="stat-value">Â¥{{quickStats.todayRevenue}}</text>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item">
        <text class="stat-label">æ€»è®¢å•</text>
        <text class="stat-value">{{quickStats.totalOrders}}</text>
      </view>
    </view>

    <!-- è®¢å•åˆ—è¡¨ -->
    <view class="orders-section">
      <view class="section-header">
        <text class="header-icon">ğŸ“‹</text>
        <text class="header-title">è®¢å•åˆ—è¡¨</text>
      </view>
      
      <!-- è®¢å•æ ‡ç­¾ -->
      <view class="order-tabs">
        <view class="tab-item {{currentTab === 'pending' ? 'active' : ''}}" 
              data-tab="pending" 
              bindtap="switchTab">
          å¾…å¤„ç†
        </view>
        <view class="tab-item {{currentTab === 'processing' ? 'active' : ''}}" 
              data-tab="processing" 
              bindtap="switchTab">
          è¿›è¡Œä¸­
        </view>
        <view class="tab-item {{currentTab === 'completed' ? 'active' : ''}}" 
              data-tab="completed" 
              bindtap="switchTab">
          å·²å®Œæˆ
        </view>
      </view>
      
      <!-- è®¢å•å¡ç‰‡åˆ—è¡¨ -->
      <view wx:if="{{orders.length > 0}}" class="order-list">
        <view wx:for="{{orders}}" wx:key="_id" class="order-card">
          <!-- è®¢å•å¤´éƒ¨ -->
          <view class="order-header">
            <text class="order-no">{{item.orderNo}}</text>
            <view class="order-status {{item.status}}">{{item.statusText}}</view>
          </view>
          
          <!-- è®¢å•ä¿¡æ¯ -->
          <view class="order-body">
            <view class="order-info-row">
              <text class="info-label">å•†å“ï¼š</text>
              <text class="info-value">{{item.productName}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">è§„æ ¼ï¼š</text>
              <text class="info-value">{{item.spec}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">å®¢æˆ·ï¼š</text>
              <text class="info-value">{{item.customerName}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">ç”»å¸ˆï¼š</text>
              <text class="info-value">{{item.artistName}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">ä¸‹å•ï¼š</text>
              <text class="info-value">{{item.createTime}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">æˆªæ­¢ï¼š</text>
              <text class="info-value highlight">{{item.deadline}}</text>
            </view>
            <view class="order-info-row">
              <text class="info-label">é‡‘é¢ï¼š</text>
              <text class="info-value price">Â¥{{item.amount}}</text>
            </view>
          </view>
          
          <!-- è®¢å•æ“ä½œ -->
          <view class="order-actions">
            <button class="action-btn primary" 
                    data-id="{{item._id}}" 
                    bindtap="viewOrderDetail">
              æŸ¥çœ‹è¯¦æƒ…
            </button>
            <button class="action-btn secondary" 
                    data-id="{{item._id}}" 
                    bindtap="contactCustomer">
              è”ç³»å®¢æˆ·
            </button>
            <button class="action-btn secondary" 
                    data-id="{{item._id}}" 
                    bindtap="contactArtist">
              è”ç³»ç”»å¸ˆ
            </button>
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view wx:else class="empty-state">
        <text class="empty-icon">ğŸ“­</text>
        <text class="empty-text">æš‚æ— è®¢å•</text>
      </view>
    </view>

    <!-- å¿«æ·åŠŸèƒ½ -->
    <view class="quick-actions">
      <view class="section-header">
        <text class="header-icon">ğŸ”§</text>
        <text class="header-title">å¿«æ·åŠŸèƒ½</text>
      </view>
      
      <view class="action-grid">
        <view class="action-item" bindtap="viewAllOrders">
          <view class="action-icon">ğŸ“‹</view>
          <text class="action-label">æŸ¥çœ‹æ‰€æœ‰è®¢å•</text>
        </view>
        <view class="action-item" bindtap="viewMessages">
          <view class="action-icon">ğŸ’¬</view>
          <text class="action-label">å®¢æˆ·å’¨è¯¢è®°å½•</text>
        </view>
        <view class="action-item" bindtap="viewProfile">
          <view class="action-icon">ğŸ‘¤</view>
          <text class="action-label">æˆ‘çš„èµ„æ–™</text>
        </view>
      </view>
    </view>
  </view>
</view>

