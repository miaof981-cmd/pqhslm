<view class="container">
  <!-- 顶部标题栏 -->
  <view class="header-section">
    <view class="header-content">
      <text class="page-title">我的商品</text>
      <button class="upload-btn" bindtap="addProduct">
        <text class="upload-icon">+</text>
        上传商品
      </button>
    </view>
  </view>

  <!-- 搜索和筛选 -->
  <view class="search-filter-section">
    <!-- 搜索框 -->
    <view class="search-box">
      <view class="search-icon"></view>
      <input class="search-input" 
             placeholder="搜索商品名称" 
             value="{{searchKeyword}}"
             bindinput="onSearchInput"/>
      <view wx:if="{{searchKeyword}}" class="clear-icon" bindtap="clearSearch"></view>
    </view>

    <!-- 筛选标签 -->
    <view class="filter-tabs">
      <view class="filter-tag {{statusFilter === 'all' ? 'active' : ''}}" data-filter="all" bindtap="filterByStatus">
        全部 {{stats.all}}
      </view>
      <view class="filter-tag {{statusFilter === 'online' ? 'active' : ''}}" data-filter="online" bindtap="filterByStatus">
        已上架 {{stats.online}}
      </view>
      <view class="filter-tag {{statusFilter === 'offline' ? 'active' : ''}}" data-filter="offline" bindtap="filterByStatus">
        已下架 {{stats.offline}}
      </view>
    </view>
  </view>

  <!-- 商品列表 -->
  <view class="product-list">
    <view wx:for="{{products}}" wx:key="_id" class="product-card">
      <image class="product-image" src="{{item.image}}" mode="aspectFill" />
      
      <view class="product-info">
        <view class="product-header">
          <text class="product-name">{{item.name}}</text>
          <view class="status-badge {{item.status === 'online' ? 'online' : 'offline'}}">
            {{item.status === 'online' ? '已上架' : '已下架'}}
          </view>
        </view>
        
        <view class="product-meta">
          <text class="product-category">分类：{{item.categoryName || '未分类'}}</text>
          <text class="product-price">¥{{item.price}}</text>
        </view>
        
        <view class="product-stats">
          <text class="stat-text">浏览：{{item.views || 0}}</text>
          <text class="stat-text">订单：{{item.orders || 0}}</text>
        </view>
      </view>

      <view class="product-actions">
        <button class="action-btn edit-btn" bindtap="editProduct" data-id="{{item._id}}">
          编辑
        </button>
        <button class="action-btn toggle-btn" bindtap="toggleProductStatus" data-id="{{item._id}}" data-status="{{item.status}}">
          {{item.status === 'online' ? '下架' : '上架'}}
        </button>
        <button class="action-btn delete-btn" bindtap="deleteProduct" data-id="{{item._id}}">
          删除
        </button>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{products.length === 0}}" class="empty-state">
    <view class="empty-icon">📦</view>
    <text class="empty-title">还没有商品</text>
    <text class="empty-hint">点击上方按钮上传您的第一件商品吧</text>
  </view>
</view>
