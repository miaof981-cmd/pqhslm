<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header-section">
    <view class="header-content">
      <text class="page-title">æˆ‘çš„å•†å“</text>
      <view class="header-actions">
        <button class="fix-btn" bindtap="fixProductData">
          <text class="fix-icon">ğŸ”§</text>
          ä¿®å¤
        </button>
        <button class="upload-btn" bindtap="addProduct">
          <text class="upload-icon">+</text>
          ä¸Šä¼ å•†å“
        </button>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter-section">
    <!-- æœç´¢æ¡† -->
    <view class="search-box">
      <view class="search-icon"></view>
      <input class="search-input" 
             placeholder="æœç´¢å•†å“åç§°" 
             value="{{searchKeyword}}"
             bindinput="onSearchInput"/>
      <view wx:if="{{searchKeyword}}" class="clear-icon" bindtap="clearSearch"></view>
    </view>

    <!-- ç­›é€‰æ ‡ç­¾ -->
    <view class="filter-tabs">
      <view class="filter-tag {{statusFilter === 'all' ? 'active' : ''}}" data-filter="all" bindtap="filterByStatus">
        å…¨éƒ¨ {{stats.all}}
      </view>
      <view class="filter-tag {{statusFilter === 'online' ? 'active' : ''}}" data-filter="online" bindtap="filterByStatus">
        å·²ä¸Šæ¶ {{stats.online}}
      </view>
      <view class="filter-tag {{statusFilter === 'offline' ? 'active' : ''}}" data-filter="offline" bindtap="filterByStatus">
        å·²ä¸‹æ¶ {{stats.offline}}
      </view>
    </view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="product-list">
    <view wx:for="{{products}}" wx:key="_id" class="product-card">
      <image class="product-image" src="{{item.image}}" mode="aspectFill" />
      <view class="product-info">
        <text class="product-name">{{item.name}}</text>
        <view class="product-price-row">
          <text class="product-price">Â¥{{item.price}}</text>
          <view class="status-badge {{item.status === 'online' ? 'badge-online' : 'badge-offline'}}">
            {{item.status === 'online' ? 'å·²ä¸Šæ¶' : 'å·²ä¸‹æ¶'}}
          </view>
        </view>
        <view class="product-stats">
          <text class="stat-text">é”€é‡ {{item.sales}}</text>
          <text class="stat-divider">|</text>
          <text class="stat-text">åº“å­˜ {{item.stock === 0 ? 'â™¾ï¸' : item.stock}}</text>
        </view>
      </view>
      <view class="product-actions">
        <button class="action-btn edit-btn" data-id="{{item._id}}" bindtap="editProduct">ç¼–è¾‘</button>
        <button class="action-btn toggle-btn {{item.status === 'online' ? 'btn-offline' : 'btn-online'}}" 
                data-id="{{item._id}}" 
                data-status="{{item.status}}" 
                bindtap="toggleProductStatus">
          {{item.status === 'online' ? 'ä¸‹æ¶' : 'ä¸Šæ¶'}}
        </button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{products.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ“¦</view>
    <text class="empty-title">è¿˜æ²¡æœ‰å•†å“</text>
    <text class="empty-hint">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸Šä¼ æ‚¨çš„ç¬¬ä¸€ä»¶å•†å“å§</text>
  </view>
</view>
