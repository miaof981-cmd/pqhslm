# å¿«æ£€æ¸…å•ï¼šç”»å¸ˆIDæ˜¾ç¤º & è®¢å•åˆ—è¡¨åˆ·æ–°

> **ä½¿ç”¨è¯´æ˜**ï¼šåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥è„šæœ¬ï¼Œ5åˆ†é’Ÿå†…å®šä½é—®é¢˜æ ¹å› 

---

## âœ… æ£€æŸ¥ç‚¹ä¸€ï¼šç”»å¸ˆç¼–å·å¤šæ¥æºè¯Šæ–­

**åœ¨å•†å“è¯¦æƒ…é¡µæ‰“å¼€æ—¶ï¼Œæ§åˆ¶å°ä¼šè‡ªåŠ¨è¾“å‡ºä»¥ä¸‹è¡¨æ ¼ï¼š**

```javascript
// è‡ªåŠ¨è¾“å‡ºï¼ˆå·²å†…ç½®åœ¨ product-detail/index.jsï¼‰
console.table({
  'æ¥æºæ£€æŸ¥': 'ç”»å¸ˆç¼–å·å¤šæ¥æºè¯Šæ–­',
  'fromAppå­˜åœ¨': !!fromApp,
  'appArtistNumber': fromApp?.artistNumber,
  'appApprovedArtistNumber': fromApp?.approvedProfile?.artistNumber,
  'fromProfileå­˜åœ¨': !!fromProfile,
  'profileArtistNumber': fromProfile?.artistNumber,
  'rawåŸå§‹å€¼': raw,
  'rawç±»å‹': typeof raw
})
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… **å¦‚æœæ‰€æœ‰æ¥æºéƒ½ä¸ºç©º**ï¼šè¯´æ˜è¯¥ç”»å¸ˆæ ¹æœ¬æ²¡æœ‰åˆ†é…ç¼–å·ï¼ˆéœ€è¦åœ¨ç®¡ç†åå° â†’ ç”»å¸ˆç®¡ç† â†’ ç¼–è¾‘ç”»å¸ˆ â†’ å¼€é€šå·¥ä½œå°æƒé™ï¼‰
- âœ… **å¦‚æœæœ‰æ¥æºä½†ç±»å‹ä¸å¯¹**ï¼šæ£€æŸ¥ `rawç±»å‹` æ˜¯å¦ä¸º `number`ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä¸º `001/002/003`
- âŒ **å¦‚æœæœ‰æ¥æºä½†æ˜¾ç¤ºä¸å‡ºæ¥**ï¼šæ£€æŸ¥ WXML æ¸²æŸ“é€»è¾‘æˆ–é¦–å±æ—¶æœº

---

## âœ… æ£€æŸ¥ç‚¹äºŒï¼šç”»å¸ˆç¼–å·æ ¼å¼åŒ–ç¡®è®¤

**æ§åˆ¶å°è¾“å‡ºï¼š**

```javascript
// è‡ªåŠ¨è¾“å‡ºï¼ˆå·²å†…ç½®ï¼‰
console.log(`ğŸ”§ ç”»å¸ˆç¼–å·æ ¼å¼åŒ–: ${raw}`)  // ç¤ºä¾‹ï¼š001
console.log(`âœ… æ‰¾åˆ°ç”»å¸ˆç¼–å·: ${artistNumber} (ç”¨æˆ·ID: ${artistUserId})`)
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… æ•°å­— `1` ä¼šè¢«æ ¼å¼åŒ–ä¸º `"001"`
- âœ… å­—ç¬¦ä¸² `"1"` ä¼šè¢«æ ¼å¼åŒ–ä¸º `"001"`
- âœ… å­—ç¬¦ä¸² `"001"` ä¿æŒä¸å˜

---

## âœ… æ£€æŸ¥ç‚¹ä¸‰ï¼šé¦–å±æ¸²æŸ“æ—¶æœºéªŒè¯

**æ§åˆ¶å°è¾“å‡ºï¼š**

```javascript
// è‡ªåŠ¨è¾“å‡ºï¼ˆå·²å†…ç½®ï¼‰
console.log('ğŸ¨ ç”»å¸ˆä¿¡æ¯å·²è®¾ç½®ï¼ˆä¸€æ¬¡æ€§setDataå®Œæˆï¼‰:', {
  name: artistName,
  artistNumber: artistNumber || '(ç©º-å°†é™çº§ä¸ºuserId)',
  userId: artistUserId,
  'é¦–å±æ—¶æœº': 'onLoadå®Œæˆ'
})
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… `é¦–å±æ—¶æœº` æ˜¾ç¤º `onLoadå®Œæˆ`ï¼Œç¡®ä¿é¦–å±å°±æœ‰æ•°æ®
- âœ… `artistNumber` å¦‚æœä¸ºç©ºï¼Œä¼šè‡ªåŠ¨é™çº§ä¸º `userId`
- âŒ å¦‚æœçœ‹åˆ° `(ç©º-å°†é™çº§ä¸ºuserId)` ä½†é¡µé¢æ˜¾ç¤ºé”™è¯¯ï¼Œæ£€æŸ¥ WXML åˆ¤æ–­é€»è¾‘

---

## âœ… æ£€æŸ¥ç‚¹å››ï¼šç®¡ç†åå°è®¢å•æ ‡ç­¾åˆ‡æ¢çŠ¶æ€

**åœ¨ç®¡ç†åå°ç‚¹å‡»"è®¢å•"æ ‡ç­¾æ—¶ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºï¼š**

```javascript
// è‡ªåŠ¨è¾“å‡ºï¼ˆå·²å†…ç½®ï¼‰
console.log('ğŸ“‹ ========== åˆ‡æ¢åˆ°è®¢å•æ ‡ç­¾ï¼Œç«‹å³æ˜¾ç¤ºåŠ è½½çŠ¶æ€ ==========')
console.log('å½“å‰çŠ¶æ€å¿«ç…§:', {
  currentTab: this.data.currentTab,
  orderFilter: this.data.orderFilter,
  orderInFlight: this.data.orderInFlight,
  ordersLength: this.data.orders.length
})
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… `orderFilter` **å¿…é¡»ä¸º `'all'`**ï¼ˆä¸èƒ½æ˜¯ `''` æˆ– `undefined`ï¼‰
- âœ… `orderInFlight` **å¿…é¡»ä¸º `false`**ï¼ˆç¡®ä¿é¦–è½®ä¸è¢«èŠ‚æµæŒ¡ä½ï¼‰
- âœ… `ordersLength` åº”è¯¥ä¸º `0`ï¼ˆç¡®ä¿æ¸…ç©ºæ—§æ•°æ®ï¼‰

---

## âœ… æ£€æŸ¥ç‚¹äº”ï¼šè®¢å•åŠ è½½äº’æ–¥é”éªŒè¯

**æ§åˆ¶å°è¾“å‡ºï¼š**

```javascript
// æ­£å¸¸æµç¨‹
console.log('ğŸ“‹ [å®‰å…¨åŠ è½½] å¼€å§‹åŠ è½½è®¢å•ï¼Œè®¾ç½®äº’æ–¥é”')
// ...
console.log('âœ… è®¢å•åŠ è½½å®Œæˆï¼Œäº’æ–¥é”å·²é‡Šæ”¾')

// å¼‚å¸¸æƒ…å†µï¼ˆå¦‚æœçœ‹åˆ°è¿™ä¸ªï¼Œè¯´æ˜é‡å¤è°ƒç”¨è¢«æ‹¦æˆªäº†ï¼‰
console.warn('[è®¢å•åŠ è½½] å·²æœ‰åŠ è½½ä»»åŠ¡è¿›è¡Œä¸­ï¼Œè·³è¿‡æœ¬æ¬¡è°ƒç”¨')
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… é¦–æ¬¡ç‚¹å‡»"è®¢å•"æ ‡ç­¾ï¼Œåº”è¯¥çœ‹åˆ°"è®¾ç½®äº’æ–¥é”" â†’ "äº’æ–¥é”å·²é‡Šæ”¾"
- âœ… å¦‚æœçœ‹åˆ°"è·³è¿‡æœ¬æ¬¡è°ƒç”¨"ï¼Œè¯´æ˜é˜²æŠ–ç”Ÿæ•ˆï¼ˆæ­£å¸¸ï¼‰
- âŒ å¦‚æœä¸€ç›´å¡åœ¨"è®¾ç½®äº’æ–¥é”"ï¼Œè¯´æ˜å¼‚å¸¸æµç¨‹æœªé‡Šæ”¾é”

---

## âœ… æ£€æŸ¥ç‚¹å…­ï¼šè®¢å•æ•°æ®åŠ è½½å®Œæ•´æ€§

**æ§åˆ¶å°è¾“å‡ºï¼š**

```javascript
console.log('âœ… è®¢å•åŠ è½½å®Œæˆ:', allOrders.length, 'ä¸ª')
console.log('è®¢å•çŠ¶æ€åˆ†å¸ƒ:', {
  å…¨éƒ¨: orderStats.all,
  å¾…æ”¯ä»˜: orderStats.unpaid,
  åˆ¶ä½œä¸­: orderStats.processing,
  å·²å®Œæˆ: orderStats.completed,
  å·²é€€æ¬¾: orderStats.refunded
})
```

**åˆ¤æ–­æ ‡å‡†ï¼š**
- âœ… `allOrders.length` åº”è¯¥ä¸å®é™…è®¢å•æ•°é‡ä¸€è‡´
- âœ… çŠ¶æ€åˆ†å¸ƒæ€»å’Œåº”è¯¥ç­‰äº `å…¨éƒ¨`
- âŒ å¦‚æœ `allOrders.length` ä¸º 0 ä½†å®é™…æœ‰è®¢å•ï¼Œæ£€æŸ¥æ•°æ®æºæˆ–ç­›é€‰é€»è¾‘

---

## ğŸ” å¿«é€Ÿæ‰‹åŠ¨æ£€æŸ¥ï¼ˆæ— éœ€ä»£ç ï¼‰

### **å•†å“è¯¦æƒ…é¡µç”»å¸ˆIDï¼š**

1. æ‰“å¼€ä»»æ„å•†å“è¯¦æƒ…é¡µ
2. æŸ¥çœ‹ç”»å¸ˆä¿¡æ¯åŒºåŸŸ
3. **é¢„æœŸæ˜¾ç¤º**ï¼š
   - å¦‚æœç”»å¸ˆæœ‰ç¼–å·ï¼š`ç”»å¸ˆåå­— ç¼–å·: 001`
   - å¦‚æœç”»å¸ˆæ— ç¼–å·ï¼š`ç”»å¸ˆåå­— ID: 1001`

### **ç®¡ç†åå°è®¢å•åˆ—è¡¨ï¼š**

1. æ‰“å¼€ç®¡ç†åå°
2. ç‚¹å‡»"è®¢å•"æ ‡ç­¾
3. **é¢„æœŸè¡Œä¸º**ï¼š
   - âœ… ç«‹å³æ˜¾ç¤º"åŠ è½½ä¸­..."ï¼ˆä¸ä¼šé—ªç°"æš‚æ— è®¢å•"ï¼‰
   - âœ… 1-2ç§’åæ˜¾ç¤ºè®¢å•åˆ—è¡¨
   - âœ… é»˜è®¤æ˜¾ç¤º"å…¨éƒ¨"è®¢å•ï¼ˆä¸éœ€è¦æ‰‹åŠ¨ç‚¹å‡»ç­›é€‰å™¨ï¼‰

---

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

| åœºæ™¯ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **å•†å“è¯¦æƒ…ç”»å¸ˆID** | æ€»æ˜¯æ˜¾ç¤º `ID: 1001`ï¼ˆç”¨æˆ·IDï¼‰ | ä¼˜å…ˆæ˜¾ç¤º `ç¼–å·: 001`ï¼ˆç”»å¸ˆç‹¬ç«‹ç¼–å·ï¼‰ |
| **ç®¡ç†åå°é¦–æ¬¡åŠ è½½** | æ˜¾ç¤º"æš‚æ— è®¢å•"ï¼Œéœ€æ‰‹åŠ¨ç‚¹å‡»"å…¨éƒ¨" | ç«‹å³æ˜¾ç¤º"åŠ è½½ä¸­"ï¼Œè‡ªåŠ¨åŠ è½½è®¢å•åˆ—è¡¨ |
| **ç¼–å·ç±»å‹æ··ä¹±** | æ•°å­— `1` å’Œå­—ç¬¦ä¸² `"1"` æ··ç”¨ | ç»Ÿä¸€æ ¼å¼åŒ–ä¸º `"001"` |
| **é¦–å±æ—¶æœºé—®é¢˜** | æ¸²æŸ“å®Œæˆåæ‰è·å–ç¼–å· | `onLoad` å®Œæˆæ—¶ä¸€æ¬¡æ€§è®¾ç½® |
| **é‡å¤åŠ è½½** | å¯èƒ½é‡å¤è°ƒç”¨å¯¼è‡´å¡é¡¿ | äº’æ–¥é”é˜²æ­¢é‡å¤è°ƒç”¨ |

---

## ğŸ› å¦‚æœé—®é¢˜ä¾ç„¶å­˜åœ¨

### **é—®é¢˜ä¸€ï¼šç”»å¸ˆIDè¿˜æ˜¯æ˜¾ç¤ºç”¨æˆ·ID**

**å¯èƒ½åŸå› ï¼š**
1. è¯¥ç”»å¸ˆçœŸçš„æ²¡æœ‰åˆ†é… `artistNumber`
2. æ•°æ®æºå­˜æ”¾ä½ç½®ä¸åœ¨ `artist_applications` æˆ– `artist_profiles`
3. ç¼“å­˜æœªæ¸…ç†

**æ’æŸ¥æ­¥éª¤ï¼š**
```javascript
// åœ¨æ§åˆ¶å°æ‰§è¡Œ
const apps = wx.getStorageSync('artist_applications') || []
const profiles = wx.getStorageSync('artist_profiles') || {}
console.log('æ‰€æœ‰ç”»å¸ˆç”³è¯·:', apps)
console.log('ç”»å¸ˆæ¡£æ¡ˆ:', profiles)

// æ‰¾åˆ°ä½ çš„ç”»å¸ˆ
const myArtist = apps.find(a => a.userId === '1001')
console.log('æˆ‘çš„ç”»å¸ˆä¿¡æ¯:', myArtist)
console.log('æˆ‘çš„ç”»å¸ˆç¼–å·:', myArtist?.artistNumber)
```

**è§£å†³æ–¹æ¡ˆï¼š**
- å¦‚æœ `artistNumber` ä¸ºç©ºï¼Œå»ç®¡ç†åå° â†’ ç”»å¸ˆç®¡ç† â†’ ç¼–è¾‘ç”»å¸ˆ â†’ ç‚¹å‡»"å¼€é€šå·¥ä½œå°æƒé™"
- å¦‚æœ `artistNumber` æœ‰å€¼ä½†æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œæ¸…é™¤å°ç¨‹åºç¼“å­˜å¹¶é‡æ–°è¿›å…¥

---

### **é—®é¢˜äºŒï¼šè®¢å•åˆ—è¡¨è¿˜æ˜¯æ˜¾ç¤º"æš‚æ— è®¢å•"**

**å¯èƒ½åŸå› ï¼š**
1. `orderFilter` åˆå§‹å€¼ä¸æ˜¯ `'all'`
2. è®¢å•æ•°æ®ç¡®å®ä¸ºç©º
3. ç­›é€‰é€»è¾‘æœ‰è¯¯

**æ’æŸ¥æ­¥éª¤ï¼š**
```javascript
// åœ¨ç®¡ç†åå°æ§åˆ¶å°æ‰§è¡Œ
console.log('å½“å‰ç­›é€‰çŠ¶æ€:', this.data.orderFilter)
console.log('æ‰€æœ‰è®¢å•:', this.data.allOrders.length)
console.log('æ˜¾ç¤ºè®¢å•:', this.data.orders.length)
console.log('è®¢å•ç»Ÿè®¡:', this.data.orderStats)
```

**è§£å†³æ–¹æ¡ˆï¼š**
- å¦‚æœ `orderFilter` ä¸æ˜¯ `'all'`ï¼Œæ‰‹åŠ¨ç‚¹å‡»"å…¨éƒ¨"ç­›é€‰å™¨
- å¦‚æœ `allOrders` ä¸º 0ï¼Œæ£€æŸ¥æœ¬åœ°å­˜å‚¨æ˜¯å¦æœ‰è®¢å•æ•°æ®
- å¦‚æœ `allOrders` æœ‰å€¼ä½† `orders` ä¸º 0ï¼Œæ£€æŸ¥ `applyCurrentOrderFilter()` é€»è¾‘

---

**æœ€åæ›´æ–°**ï¼š2025-11-07  
**ä¿®å¤ç‰ˆæœ¬**ï¼šcommit å¾…æäº¤

