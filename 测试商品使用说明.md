# 📦 测试商品管理工具使用说明

## 🎯 功能概述

提供两个脚本文件，帮助你快速创建和管理测试商品，查看不同出稿时间的颜色分级效果。

---

## 📁 文件说明

### 1. `快速测试-颜色分级.js` ⚡（推荐）
**用途：** 一键创建/删除测试商品，最简单快速

**使用方法：**
1. 打开微信开发者工具
2. 打开控制台（Console）
3. 复制整个文件内容
4. 粘贴到控制台，按回车
5. 自动创建5个测试商品，覆盖所有颜色分级

**删除测试商品：**
- 在脚本文件底部有注释的删除代码
- 复制删除代码到控制台执行即可

---

### 2. `测试商品管理.js` 🛠️（完整版）
**用途：** 提供完整的管理功能，可精细控制

**使用方法：**
1. 复制整个文件内容到控制台
2. 工具会自动加载并显示使用说明
3. 调用提供的函数进行操作

---

## 🚀 快速开始（推荐方式）

### 步骤1：创建测试商品

在控制台粘贴以下代码：

\`\`\`javascript
// 从文件 "快速测试-颜色分级.js" 复制全部内容
// 一键创建5个测试商品
\`\`\`

创建的商品包括：
- ✅ 急速头像（1天） - 浅蓝色 `#F0F8FF`
- ✅ 快速Q版（3天） - 浅绿色 `#F4F9F4`
- ✅ 标准插画（7天） - 浅黄色 `#FFFCF5`
- ✅ 精美插画（8天） - 浅灰色 `#FAFAFA`
- ✅ 精修大图（20天）- 浅灰色 `#FAFAFA`

### 步骤2：查看效果

1. 刷新首页
2. 观察不同商品的出稿时间标签颜色
3. 验证视觉效果是否符合预期

### 步骤3：删除测试商品

在控制台粘贴以下代码：

\`\`\`javascript
(function() {
  let products = wx.getStorageSync('mock_products') || []
  const before = products.length
  
  products = products.filter(p => !p.id.includes('test_'))
  wx.setStorageSync('mock_products', products)
  
  const deleted = before - products.length
  
  console.log(\`✅ 已删除测试商品: \${deleted} 个\`)
  console.log(\`   删除前: \${before} 个\`)
  console.log(\`   删除后: \${products.length} 个\`)
})()
\`\`\`

---

## 🛠️ 完整工具使用（测试商品管理.js）

### 加载工具

\`\`\`javascript
// 复制 "测试商品管理.js" 全部内容到控制台
// 工具加载后会显示帮助信息
\`\`\`

### 创建商品

\`\`\`javascript
// 创建8天出稿商品
create8DayProduct()

// 创建20天出稿商品
create20DayProduct()

// 创建全部测试商品（1/3/7/8/20天）
createAllTestProducts()
\`\`\`

### 查询商品

\`\`\`javascript
// 查看所有商品列表
listAllProducts()

// 查找特定出稿天数的商品
findProductsByDeliveryDays(8)  // 查找8天出稿的
findProductsByDeliveryDays(20) // 查找20天出稿的
\`\`\`

### 删除商品

\`\`\`javascript
// 删除指定ID的商品
deleteProductById('test_8day_1234567890')

// 删除所有测试商品（ID包含"test_"）
deleteAllTestProducts()

// ⚠️ 删除全部商品（谨慎使用）
deleteAllProducts()
\`\`\`

---

## 🎨 颜色分级说明

| 出稿天数 | 颜色名称 | 背景色 | 文字色 | 视觉效果 |
|---------|---------|--------|--------|---------|
| **1天** | 浅蓝色 | `#F0F8FF` | `#7BA3CC` | 极淡蓝白色，不注意看几乎看不见 |
| **2-3天** | 浅绿色 | `#F4F9F4` | `#81B589` | 极淡绿白色，融入背景 |
| **4-7天** | 浅黄色 | `#FFFCF5` | `#C9A872` | 极淡象牙白，温和柔和 |
| **8-30天** | 浅灰色 | `#FAFAFA` | `#B0B0B0` | 极淡灰白色，最低存在感 |

---

## 💡 使用场景

### 场景1：验证颜色效果
\`\`\`javascript
// 创建所有测试商品
createAllTestProducts()

// 查看列表
listAllProducts()

// 刷新首页查看效果
// 如果不满意，调整CSS后再次查看
\`\`\`

### 场景2：测试特定天数
\`\`\`javascript
// 只创建8天和20天的商品
create8DayProduct()
create20DayProduct()

// 查看效果
listAllProducts()
\`\`\`

### 场景3：清理测试数据
\`\`\`javascript
// 查看当前有多少测试商品
findProductsByDeliveryDays(8)
findProductsByDeliveryDays(20)

// 删除所有测试商品
deleteAllTestProducts()

// 确认删除成功
listAllProducts()
\`\`\`

---

## ⚠️ 注意事项

1. **测试商品标识**
   - 所有测试商品ID都包含 `test_`
   - 删除测试商品时不会影响正式商品

2. **图片生成**
   - 使用SVG动态生成商品图片
   - 图片显示对应的出稿天数
   - 图片背景色与实际标签颜色一致

3. **数据持久化**
   - 所有操作都保存在本地存储
   - 刷新页面后数据依然存在
   - 需要手动删除测试数据

4. **推荐标签**
   - 1天出稿的商品会自动添加"推荐"和"热销"标签
   - 这样可以在"为你推荐"区域显示

---

## 🔍 调试技巧

### 查看本地存储
\`\`\`javascript
// 查看所有商品数据
console.log(wx.getStorageSync('mock_products'))

// 查看存储占用
const storageInfo = wx.getStorageInfoSync()
console.log('当前存储:', storageInfo.currentSize, 'KB')
console.log('存储上限:', storageInfo.limitSize, 'KB')
console.log('使用率:', (storageInfo.currentSize / storageInfo.limitSize * 100).toFixed(2), '%')
\`\`\`

### 验证颜色类名
\`\`\`javascript
// 检查商品的deliveryDays字段
const products = wx.getStorageSync('mock_products') || []
products.forEach(p => {
  const className = p.deliveryDays <= 1 ? 'fast' : 
                   (p.deliveryDays <= 3 ? 'quick' : 
                   (p.deliveryDays <= 7 ? 'normal' : 'slow'))
  console.log(\`\${p.name}: \${p.deliveryDays}天 → delivery-\${className}\`)
})
\`\`\`

---

## 📞 常见问题

**Q: 为什么刷新后测试商品消失了？**
A: 检查是否执行了删除操作，或者清除了本地存储。

**Q: 如何修改测试商品的价格或天数？**
A: 直接修改脚本中的配置数组，然后重新执行。

**Q: 测试商品太多，如何快速清理？**
A: 使用 \`deleteAllTestProducts()\` 删除所有ID包含"test_"的商品。

**Q: 如何创建自定义天数的测试商品？**
A: 参考脚本中的创建逻辑，自己编写代码创建。

---

## 📝 示例工作流

\`\`\`javascript
// 1. 加载工具
// (复制 测试商品管理.js 到控制台)

// 2. 创建测试商品
createAllTestProducts()

// 3. 查看创建结果
listAllProducts()

// 4. 刷新首页，查看颜色效果

// 5. 如果需要调整，修改CSS后重新查看

// 6. 测试完成后，清理数据
deleteAllTestProducts()

// 7. 确认清理成功
listAllProducts() // 应该只剩正式商品
\`\`\`

---

## ✅ 最佳实践

1. ✅ 使用"快速测试"脚本进行日常测试
2. ✅ 测试完成后及时清理测试数据
3. ✅ 避免在正式环境运行删除全部商品的操作
4. ✅ 定期检查本地存储使用情况
5. ✅ 保存有用的测试脚本，方便复用

---

**祝测试顺利！🎉**

