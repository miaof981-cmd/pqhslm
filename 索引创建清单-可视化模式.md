# 索引创建清单 - 可视化模式

> **使用说明**：适用于云开发控制台的可视化添加索引界面  
> **索引总数**：26个索引，分布在6个集合中  
> **填写提示**：按表格逐项填写即可

---

## 1️⃣ artist_applications（画师申请表）- 3个索引

### 索引 1.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `userId_1` 或留空（系统自动生成）|
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `userId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 1.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `artistNumber_1` 或留空 |
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `artistNumber` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 1.3

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `status` |
| 索引字段 - 排序1 | `升序` |

✅ **artist_applications 完成！应有3个索引。**

---

## 2️⃣ income_ledger（收入账本）- 4个索引

### 索引 2.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `userId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 2.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `orderId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `orderId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 2.3

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `incomeType_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `incomeType` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 2.4

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `createTime_-1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `createTime` |
| 索引字段 - 排序1 | `降序` ⚠️ 注意是降序 |

✅ **income_ledger 完成！应有4个索引。**

---

## 3️⃣ orders（订单表）- 10个索引 ⭐

### 索引 3.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `orderId_1` 或留空 |
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `orderId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `buyerId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `buyerId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.3

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `artistId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `artistId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.4

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `serviceId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `serviceId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.5

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `status` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.6

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `createTime_-1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `createTime` |
| 索引字段 - 排序1 | `降序` ⚠️ 注意是降序 |

---

### 索引 3.7

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `deadline_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `deadline` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 3.8（复合索引）⚠️ 需要添加2个字段

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1_createTime_-1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `status` |
| 索引字段 - 排序1 | `升序` |
| 👉 点击"+"添加第2个字段 | |
| 索引字段 - 字段2 | `createTime` |
| 索引字段 - 排序2 | `降序` ⚠️ 注意是降序 |

---

### 索引 3.9（复合索引）⚠️ 需要添加2个字段

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `buyerId_1_status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `buyerId` |
| 索引字段 - 排序1 | `升序` |
| 👉 点击"+"添加第2个字段 | |
| 索引字段 - 字段2 | `status` |
| 索引字段 - 排序2 | `升序` |

---

### 索引 3.10（复合索引）⚠️ 需要添加2个字段

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `artistId_1_status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `artistId` |
| 索引字段 - 排序1 | `升序` |
| 👉 点击"+"添加第2个字段 | |
| 索引字段 - 字段2 | `status` |
| 索引字段 - 排序2 | `升序` |

✅ **orders 完成！应有10个索引。**

---

## 4️⃣ products（商品表）- 4个索引

### 索引 4.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `productId_1` 或留空 |
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `productId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 4.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `artistId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `artistId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 4.3

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `categoryId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `categoryId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 4.4

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `status` |
| 索引字段 - 排序1 | `升序` |

✅ **products 完成！应有4个索引。**

---

## 5️⃣ users（用户表）- 2个索引

### 索引 5.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `userId_1` 或留空 |
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `userId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 5.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `openid_1` 或留空 |
| 索引属性 | ⭕ 选择"唯一" |
| 索引字段 - 字段1 | `openid` |
| 索引字段 - 排序1 | `升序` |

✅ **users 完成！应有2个索引。**

---

## 6️⃣ withdraw_records（提现记录）- 3个索引

### 索引 6.1

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `userId_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `userId` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 6.2

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `status_1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `status` |
| 索引字段 - 排序1 | `升序` |

---

### 索引 6.3

| 输入项 | 填写内容 |
|--------|---------|
| 索引名称 | `time_-1` 或留空 |
| 索引属性 | ⭕ 选择"非唯一" |
| 索引字段 - 字段1 | `time` |
| 索引字段 - 排序1 | `降序` ⚠️ 注意是降序 |

✅ **withdraw_records 完成！应有3个索引。**

---

## 📊 完成检查清单

### 按集合统计

- [ ] **artist_applications**：3个索引
  - [ ] userId（唯一）
  - [ ] artistNumber（唯一）
  - [ ] status（非唯一）

- [ ] **income_ledger**：4个索引
  - [ ] userId（非唯一）
  - [ ] orderId（非唯一）
  - [ ] incomeType（非唯一）
  - [ ] createTime（非唯一，降序）

- [ ] **orders**：10个索引
  - [ ] orderId（唯一）
  - [ ] buyerId（非唯一）
  - [ ] artistId（非唯一）
  - [ ] serviceId（非唯一）
  - [ ] status（非唯一）
  - [ ] createTime（非唯一，降序）
  - [ ] deadline（非唯一）
  - [ ] status + createTime（复合，非唯一）
  - [ ] buyerId + status（复合，非唯一）
  - [ ] artistId + status（复合，非唯一）

- [ ] **products**：4个索引
  - [ ] productId（唯一）
  - [ ] artistId（非唯一）
  - [ ] categoryId（非唯一）
  - [ ] status（非唯一）

- [ ] **users**：2个索引
  - [ ] userId（唯一）
  - [ ] openid（唯一）

- [ ] **withdraw_records**：3个索引
  - [ ] userId（非唯一）
  - [ ] status（非唯一）
  - [ ] time（非唯一，降序）

---

## 📝 操作提示

### 可视化模式操作步骤

1. **进入集合**：点击左侧集合名称
2. **打开索引管理**：点击"索引管理"标签
3. **添加索引**：点击"添加索引"按钮
4. **填写索引名称**：可以留空，系统会自动生成
5. **选择索引属性**：
   - 唯一：⭕ 选择"唯一"
   - 非唯一：⭕ 选择"非唯一"
6. **添加字段**：
   - 在"索引字段"区域，输入字段名
   - 选择排序方式：升序/降序
   - 如果是复合索引，点击"+"添加第2个字段
7. **确认创建**：点击"确定"按钮
8. **检查结果**：索引列表中应该出现新创建的索引

---

## ⚠️ 特别注意

### 1. 升序 vs 降序

- **升序**：大部分字段使用升序
- **降序**：以下字段使用降序
  - `createTime`（创建时间）
  - `time`（提现时间）
  - 原因：最新的数据排在前面

### 2. 唯一 vs 非唯一

**唯一索引**（共5个）：
- `artist_applications.userId`
- `artist_applications.artistNumber`
- `orders.orderId`
- `products.productId`
- `users.userId`
- `users.openid`

**其他20个索引都是非唯一**

### 3. 复合索引

**orders 集合有3个复合索引**，需要添加2个字段：
- 索引3.8：status + createTime
- 索引3.9：buyerId + status
- 索引3.10：artistId + status

**操作要点**：
1. 填写第1个字段后，点击"+"按钮
2. 出现第2个字段输入框
3. 填写第2个字段名和排序
4. 点击确定

---

## 🎯 推荐顺序

### 从简单到复杂

1. **users**（2个，都是单字段）✅ 最简单
2. **products**（4个，都是单字段）
3. **artist_applications**（3个，都是单字段）
4. **income_ledger**（4个，都是单字段）
5. **withdraw_records**（3个，都是单字段）
6. **orders**（10个，包含3个复合索引）⭐ 最复杂

### 预计用时

- **简单集合**（users/products等）：每个2-5分钟
- **orders集合**：10-15分钟（因为有复合索引）
- **总计**：30-40分钟

---

## ❓ 常见问题

**Q1：索引名称写什么？**  
A：可以留空，系统会自动生成。如果要手动填写，建议格式：`字段名_排序方向`（如 `userId_1` 表示升序，`createTime_-1` 表示降序）

**Q2："唯一"和"非唯一"怎么选？**  
A：
- **唯一**：该字段的值不能重复（如用户ID、订单号）
- **非唯一**：该字段的值可以重复（如订单状态、用户角色）

**Q3：升序和降序有什么区别？**  
A：
- **升序**：A→Z、1→9、旧→新
- **降序**：Z→A、9→1、新→旧
- 时间字段通常用降序，让最新的数据排在前面

**Q4：复合索引怎么创建？**  
A：
1. 填写第1个字段名和排序
2. 点击字段输入框旁边的"+"按钮
3. 出现第2个字段输入框
4. 填写第2个字段名和排序
5. 点击确定

**Q5：提示"字段不存在"怎么办？**  
A：这是正常的！索引可以提前创建，等数据插入时会自动使用。

---

## 🎉 完成后

当所有26个索引创建完成后，告诉我："所有索引创建完成"

我会为您准备下一步的操作指南！

